"use strict";(self.webpackChunkjira=self.webpackChunkjira||[]).push([[213],{9213:function(e,n,t){t.r(n),t.d(n,{default:function(){return Je}});var r,i,o=t(7186),a=t(5751),s=t(6871),c=t(8321),u=t(5639),l=t(7309),d=t(5728),f=t(2791),h=["title","titleId"];function m(){return m=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},m.apply(this,arguments)}function p(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function j(e,n){var t=e.title,o=e.titleId,a=p(e,h);return f.createElement("svg",m({viewBox:"0 0 179 32",xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true",className:"css-sq9aeg-Logo",ref:n,"aria-labelledby":o},a),t?f.createElement("title",{id:o},t):null,r||(r=f.createElement("defs",null,f.createElement("linearGradient",{x1:"97.6553341%",y1:"35.6591143%",x2:"37.202032%",y2:"75.4891864%",id:"uid392-1"},f.createElement("stop",{stopColor:"#0052CC",offset:"7%"}),f.createElement("stop",{stopColor:"#2684FF",offset:"100%"})),f.createElement("linearGradient",{x1:"8.43371138%",y1:"60.1495759%",x2:"64.1161517%",y2:"23.5790285%",id:"uid392-2"},f.createElement("stop",{stopColor:"#0052CC",offset:"0%"}),f.createElement("stop",{stopColor:"#2684FF",offset:"100%"})))),i||(i=f.createElement("g",{stroke:"none",strokeWidth:1,fillRule:"nonzero"},f.createElement("path",{d:"M11.3881081,27.9242105 C12.4881804,26.8071817 13.1062496,25.2917664 13.1062496,23.7115789 C13.1062496,22.1313915 12.4881804,20.6159762 11.3881081,19.4989474 L11.3881081,19.4989474 L3.74837838,11.7621053 L0.273513514,15.2926316 C-0.0900771727,15.6625064 -0.0900771727,16.2617042 0.273513514,16.6315789 L11.3881081,27.9242105 L11.3881081,27.9242105 Z",fill:"currentColor",fillRule:"nonzero"}),f.createElement("path",{d:"M22.5027027,15.2926316 L11.3881081,4 L11.3881081,4 L11.3539189,4.03473684 L11.3539189,4.03473684 C9.08852466,6.36456187 9.09963243,10.1156459 11.3787838,12.4315789 L19.0247297,20.1652632 L22.5027027,16.6315789 C22.8662934,16.2617042 22.8662934,15.6625064 22.5027027,15.2926316 Z",fill:"currentColor",fillRule:"nonzero"}),f.createElement("path",{d:"M11.3881081,12.4252632 C9.10895676,10.1093301 9.09784899,6.35824608 11.3632432,4.02842105 L3.43445946,12.0810526 L7.58067568,16.2936842 L11.3881081,12.4252632 Z",fill:"url(#uid392-1)",fillRule:"nonzero"}),f.createElement("path",{d:"M15.1893243,15.6368421 L11.3881081,19.4989474 C12.4881804,20.6159762 13.1062496,22.1313915 13.1062496,23.7115789 C13.1062496,25.2917664 12.4881804,26.8071817 11.3881081,27.9242105 L19.3355405,19.8494737 L15.1893243,15.6368421 Z",fill:"url(#uid392-2)",fillRule:"nonzero"}),f.createElement("path",{d:"M36.07,18.956 C36.07,20.646 35.394,21.842 33.418,21.842 C32.56,21.842 31.702,21.686 31,21.4 L31,23.662 C31.65,23.896 32.586,24.104 33.808,24.104 C37.032,24.104 38.41,21.946 38.41,18.8 L38.41,6.918 L36.07,6.918 L36.07,18.956 Z M41.894,7.568 C41.894,8.556 42.544,9.128 43.454,9.128 C44.364,9.128 45.014,8.556 45.014,7.568 C45.014,6.58 44.364,6.008 43.454,6.008 C42.544,6.008 41.894,6.58 41.894,7.568 Z M42.31,24 L44.546,24 L44.546,11 L42.31,11 L42.31,24 Z M47.926,24 L50.11,24 L50.11,16.33 C50.11,13.574 51.852,12.716 54.712,13.002 L54.712,10.818 C52.164,10.662 50.864,11.754 50.11,13.288 L50.11,11 L47.926,11 L47.926,24 Z M65.45,24 L65.45,21.66 C64.618,23.376 63.058,24.26 61.056,24.26 C57.598,24.26 55.856,21.322 55.856,17.5 C55.856,13.834 57.676,10.74 61.316,10.74 C63.214,10.74 64.67,11.598 65.45,13.288 L65.45,11 L67.686,11 L67.686,24 L65.45,24 Z M58.092,17.5 C58.092,20.62 59.34,22.18 61.654,22.18 C63.656,22.18 65.45,20.906 65.45,18.02 L65.45,16.98 C65.45,14.094 63.812,12.82 61.914,12.82 C59.392,12.82 58.092,14.484 58.092,17.5 Z M86.926,19.294 C86.926,16.226 84.898,15.056 81.284,14.146 C78.268,13.392 77.176,12.69 77.176,11.286 C77.176,9.726 78.502,8.946 80.738,8.946 C82.506,8.946 84.352,9.258 86.068,10.246 L86.068,7.906 C84.898,7.256 83.312,6.658 80.842,6.658 C76.864,6.658 74.836,8.634 74.836,11.286 C74.836,14.094 76.552,15.42 80.4,16.356 C83.65,17.136 84.586,17.942 84.586,19.45 C84.586,20.958 83.624,21.972 81.05,21.972 C78.788,21.972 76.344,21.374 74.758,20.542 L74.758,22.934 C76.084,23.61 77.618,24.26 80.92,24.26 C85.158,24.26 86.926,22.258 86.926,19.294 Z M95.09,24.26 C91.19,24.26 88.902,21.374 88.902,17.474 C88.902,13.574 91.19,10.74 95.09,10.74 C98.964,10.74 101.226,13.574 101.226,17.474 C101.226,21.374 98.964,24.26 95.09,24.26 Z M95.09,12.82 C92.308,12.82 91.086,15.004 91.086,17.474 C91.086,19.944 92.308,22.18 95.09,22.18 C97.846,22.18 99.042,19.944 99.042,17.474 C99.042,15.004 97.846,12.82 95.09,12.82 Z M106.92,9.622 C106.92,8.452 107.596,7.646 108.974,7.646 C109.494,7.646 109.988,7.698 110.378,7.776 L110.378,5.722 C109.988,5.618 109.546,5.514 108.87,5.514 C106.088,5.514 104.736,7.152 104.736,9.57 L104.736,11 L102.63,11 L102.63,13.08 L104.736,13.08 L104.736,24 L106.92,24 L106.92,13.08 L110.274,13.08 L110.274,11 L106.92,11 L106.92,9.622 Z M115.786,19.892 L115.786,13.08 L119.244,13.08 L119.244,11 L115.786,11 L115.786,8.244 L113.602,8.244 L113.602,11 L111.496,11 L111.496,13.08 L113.602,13.08 L113.602,19.944 C113.602,22.362 114.954,24 117.736,24 C118.412,24 118.854,23.896 119.244,23.792 L119.244,21.634 C118.854,21.712 118.36,21.816 117.84,21.816 C116.462,21.816 115.786,21.036 115.786,19.892 Z M125.432,24 L128.292,24 L130.528,17.708 L131.724,13.704 L132.92,17.708 L135.156,24 L138.016,24 L142.8,11 L140.33,11 L136.586,22.024 L132.79,11 L130.658,11 L126.862,22.024 L123.118,11 L120.648,11 L125.432,24 Z M153.538,24 L153.538,21.66 C152.706,23.376 151.146,24.26 149.144,24.26 C145.686,24.26 143.944,21.322 143.944,17.5 C143.944,13.834 145.764,10.74 149.404,10.74 C151.302,10.74 152.758,11.598 153.538,13.288 L153.538,11 L155.774,11 L155.774,24 L153.538,24 Z M146.18,17.5 C146.18,20.62 147.428,22.18 149.742,22.18 C151.744,22.18 153.538,20.906 153.538,18.02 L153.538,16.98 C153.538,14.094 151.9,12.82 150.002,12.82 C147.48,12.82 146.18,14.484 146.18,17.5 Z M159.154,24 L161.338,24 L161.338,16.33 C161.338,13.574 163.08,12.716 165.94,13.002 L165.94,10.818 C163.392,10.662 162.092,11.754 161.338,13.288 L161.338,11 L159.154,11 L159.154,24 Z M178.108,23.48 C177.042,24.052 175.404,24.26 174.078,24.26 C169.216,24.26 167.084,21.452 167.084,17.474 C167.084,13.548 169.268,10.74 173.22,10.74 C177.224,10.74 178.836,13.522 178.836,17.474 L178.836,18.488 L169.346,18.488 C169.658,20.698 171.088,22.128 174.156,22.128 C175.664,22.128 176.938,21.842 178.108,21.426 L178.108,23.48 Z M173.116,12.768 C170.75,12.768 169.554,14.302 169.32,16.564 L176.574,16.564 C176.444,14.146 175.352,12.768 173.116,12.768 Z",fill:"inherit",fillRule:"evenodd"}))))}var x,v,Z=f.forwardRef(j),C=(t.p,t(5850)),L=t(5485),g=t(2126),y=t(1333),I=t(3020),b=t(286),k=t(1933),M=function(e){var n=(0,b.i)();return(0,k.useQuery)(["users",e],(function(){return n("users",{data:e})}))},P=t(184),w=function(){var e=M(),n=e.data,t=e.refetch,r=(0,P.jsxs)(E,{children:[(0,P.jsx)(L.Z.Text,{type:"secondary",children:"\u7ec4\u5458\u5217\u8868"}),(0,P.jsx)(g.ZP,{dataSource:n,renderItem:function(e){return(0,P.jsx)(g.ZP.Item,{children:(0,P.jsx)(g.ZP.Item.Meta,{title:e.name})},e.id)}}),(0,P.jsx)(y.Z,{})]});return(0,P.jsx)(I.Z,{content:r,placement:"bottom",onVisibleChange:function(){return t()},children:(0,P.jsx)("span",{children:"\u7ec4\u5458"})})},E=a.ZP.div(x||(x=(0,o.Z)(["\n  min-width: 30rem;\n"]))),O=t(9042),T=t(6515),N=t(3430),D=t(5531),F=t(3032),z=t(4322),S=t.n(z),Y=function(e,n){var t=(0,k.useQueryClient)();return{onSuccess:function(){return t.invalidateQueries(e)},onMutate:function(r){return(0,F.Z)(S().mark((function i(){var o;return S().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=t.getQueryData(e),t.setQueryData(e,(function(e){return n(r,e)})),i.abrupt("return",{previousItems:o});case 3:case"end":return i.stop()}}),i)})))()},onError:function(n,r,i){t.setQueryData(e,i.previousItems)}}},Q=function(e){return Y(e,(function(e,n){return(null===n||void 0===n?void 0:n.filter((function(n){return n.id!==e.id})))||[]}))},R=function(e){return Y(e,(function(e,n){return n?[].concat((0,D.Z)(n),[e]):[]}))},A=function(e){var n=(0,b.i)();return(0,k.useQuery)(["project",(0,C.sW)(e)],(function(){return n("projects",{data:e})}))},W=function(e){var n=(0,b.i)();return(0,k.useQuery)(["project",{id:e}],(function(){return n("projects/".concat(e))}),{enabled:Boolean(e)})},X=function(e){var n=(0,b.i)();return(0,k.useMutation)((function(e){return n("projects/".concat(e.id),{method:"PATCH",data:e})}),function(e){return Y(e,(function(e,n){return(null===n||void 0===n?void 0:n.map((function(n){return n.id===e.id?(0,T.Z)((0,T.Z)({},n),e):n})))||[]}))}(e))},B=function(e){var n=(0,b.i)();return(0,k.useMutation)((function(e){return n("projects",{data:e,method:"POST"})}),R(e))},q=t(3504),H=function(e){var n=(0,q.lr)(),t=(0,N.Z)(n,1)[0],r=U(),i=(0,f.useState)(e),o=(0,N.Z)(i,1)[0];return[(0,f.useMemo)((function(){return(0,C.P9)(Object.fromEntries(t),o)}),[t,o]),function(e){return r(e)}]},U=function(){var e=(0,q.lr)(),n=(0,N.Z)(e,2),t=n[0],r=n[1];return function(e){var n=(0,C.sW)((0,T.Z)((0,T.Z)({},Object.fromEntries(t)),e));return r(n)}},V=function(){var e=H(["projectCreate"]),n=(0,N.Z)(e,2),t=n[0].projectCreate,r=n[1],i=H(["editingProjectId"]),o=(0,N.Z)(i,2),a=o[0].editingProjectId,s=o[1],c=U(),u=W(Number(a)),l=u.data,d=u.isLoading;return{projectModalOpen:"true"===t||Boolean(a),open:function(){return r({projectCreate:!0})},close:function(){return c({projectCreate:"",editingProjectId:""})},startEdit:function(e){return s({editingProjectId:e})},editingProject:l,isLoading:d}},G=function(){var e=H(["name","personId"]),n=(0,N.Z)(e,2),t=n[0],r=n[1];return[(0,f.useMemo)((function(){return(0,T.Z)((0,T.Z)({},t),{},{personId:Number(t.personId)||void 0})}),[t]),r]},K=function(){var e=G();return["project",(0,N.Z)(e,1)[0]]},_=function(){var e=V().open,n=A(),t=n.data,r=n.refetch,i=null===t||void 0===t?void 0:t.filter((function(e){return e.pin})),o=(0,P.jsxs)(J,{children:[(0,P.jsx)(L.Z.Text,{type:"secondary",children:"\u6536\u85cf\u9879\u76ee"}),(0,P.jsx)(g.ZP,{dataSource:i,renderItem:function(e){return(0,P.jsx)(g.ZP.Item,{children:(0,P.jsx)(g.ZP.Item.Meta,{title:e.name})},e.id)}}),(0,P.jsx)(y.Z,{}),(0,P.jsx)(d.zL,{type:"link",onClick:e,children:"\u65b0\u5efa\u9879\u76ee"})]});return(0,P.jsx)(I.Z,{onVisibleChange:function(){return r()},placement:"bottom",content:o,children:(0,P.jsx)("span",{children:"\u9879\u76ee"})})},J=a.ZP.div(v||(v=(0,o.Z)(["\n  min-width: 30rem;\n"]))),$=t(5589),ee=t(177),ne=t(3738),te=t(4993),re=["value","onChange","defaultOptionName","options"],ie=function(e){var n=e.value,t=e.onChange,r=e.defaultOptionName,i=e.options,o=(0,ne.Z)(e,re);return(0,P.jsxs)(te.Z,(0,T.Z)((0,T.Z)({value:null!==i&&void 0!==i&&i.length?oe(n):0,onChange:function(e){return null===t||void 0===t?void 0:t(oe(e)||void 0)}},o),{},{children:[r?(0,P.jsx)(te.Z.Option,{value:0,children:r}):null,null===i||void 0===i?void 0:i.map((function(e){return(0,P.jsx)(te.Z.Option,{value:e.id,children:e.name},e.id)}))]}))},oe=function(e){return isNaN(Number(e))?0:Number(e)},ae=function(e){var n=M().data;return(0,P.jsx)(ie,(0,T.Z)({options:n||[]},e))},se=function(e){e.users;var n=e.param,t=e.setParam;return(0,P.jsxs)($.Z,{style:{marginBottom:"2rem"},layout:"inline",children:[(0,P.jsx)($.Z.Item,{children:(0,P.jsx)(ee.Z,{placeholder:"\u9879\u76ee\u540d",type:"text",value:n.name,onChange:function(e){return t((0,T.Z)((0,T.Z)({},n),{},{name:e.target.value}))}})}),(0,P.jsx)($.Z.Item,{children:(0,P.jsx)(ae,{defaultOptionName:"\u8d1f\u8d23\u4eba",value:n.personId,onChange:function(e){return t((0,T.Z)((0,T.Z)({},n),{},{personId:e}))}})})]})},ce=t(9621),ue=t(8581),le=t(7892),de=t.n(le),fe=t(7561),he=["checked","onCheckedChange"],me=function(e){var n=e.checked,t=e.onCheckedChange,r=(0,ne.Z)(e,he);return(0,P.jsx)(fe.Z,(0,T.Z)({count:1,value:n?1:0,onChange:function(e){return null===t||void 0===t?void 0:t(!!e)}},r))},pe=["users"],je=function(e){var n=e.users,t=(0,ne.Z)(e,pe),r=X(K()).mutate;return(0,P.jsx)(ce.Z,(0,T.Z)({pagination:!1,rowKey:"id",columns:[{title:(0,P.jsx)(me,{checked:!0,disabled:!0}),render:function(e,n){return(0,P.jsx)(me,{checked:n.pin,onCheckedChange:(t=n.id,function(e){return r({id:t,pin:e})})});var t}},{title:"\u540d\u79f0",sorter:function(e,n){return e.name.localeCompare(n.name)},render:function(e,n){return(0,P.jsx)(q.rU,{to:"projects/".concat(String(n.id)),children:n.name})}},{title:"\u90e8\u95e8",dataIndex:"organization"},{title:"\u8d1f\u8d23\u4eba",render:function(e,t){var r;return(0,P.jsx)("span",{children:(null===(r=n.find((function(e){return e.id===t.personId})))||void 0===r?void 0:r.name)||"\u672a\u77e5"})}},{title:"\u521b\u5efa\u65f6\u95f4",render:function(e,n){return(0,P.jsx)("span",{children:n.created?de()(n.created).format("YYYY-MM-DD"):"\u65e0"})}},{render:function(e,n){return(0,P.jsx)(xe,{project:n})}}]},t))},xe=function(e){var n,t=e.project,r=V().startEdit,i=function(e){var n=(0,b.i)();return(0,k.useMutation)((function(e){var t=e.id;return n("projects/".concat(t),{method:"DELETE"})}),Q(e))}(K()),o=i.mutate;return(0,P.jsx)(c.Z,{overlay:(0,P.jsxs)(u.Z,{children:[(0,P.jsx)(u.Z.Item,{onClick:(n=t.id,function(){return r(n)}),children:"\u7f16\u8f91"},"edit"),(0,P.jsx)(u.Z.Item,{onClick:function(){return function(e){ue.Z.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u9879\u76ee\u5417?",content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk:function(){o({id:e})}})}(t.id)},children:"\u5220\u9664"},"delete")]}),children:(0,P.jsx)(d.zL,{type:"link",children:"\u66f4\u591a"})})},ve=["metadata","phases"],Ze=[];setInterval((function(){if(Ze.length){var e=(0,D.Z)(Ze);Ze=[],console.log(e)}}),5e3);var Ce,Le=function(e){var n=e.metadata,t=e.phases,r=(0,ne.Z)(e,ve);return(0,P.jsx)(f.Profiler,(0,T.Z)({onRender:function(e,r,i,o,a,s,c){t&&!t.includes(r)||Ze.push({id:e,phase:r,actualDuration:i,baseDuration:o,startTime:a,commitTime:s,interactions:c,metadata:n})}},r))},ge=function(){(0,C.jr)("\u9879\u76ee\u5217\u8868",!1);var e=G(),n=(0,N.Z)(e,2),t=n[0],r=n[1],i=V().open,o=(0,C.Nr)(t,2e3),a=A(o),s=a.isLoading,c=a.error,u=a.data,l=M().data;return(0,P.jsx)(Le,{id:"\u9879\u76ee\u5217\u8868",children:(0,P.jsxs)(ye,{children:[(0,P.jsxs)(d.X2,{marginBottom:2,between:!0,children:[(0,P.jsx)("h1",{children:"\u9879\u76ee\u5217\u8868"}),(0,P.jsx)(d.zL,{onClick:i,type:"link",children:"\u65b0\u5efa\u9879\u76ee"})]}),(0,P.jsx)(se,{users:l||[],param:t,setParam:r}),(0,P.jsx)(d.Tv,{error:c}),(0,P.jsx)(je,{loading:s,users:l||[],dataSource:u||[]})]})})};ge.whyDidYouRender=!1;var ye=a.ZP.div(Ce||(Ce=(0,o.Z)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),Ie=function(e){var n=function(){var e=(0,b.i)();return(0,k.useQuery)(["taskTypes"],(function(){return e("taskTypes")}))}().data;return(0,P.jsx)(ie,(0,T.Z)((0,T.Z)({},e),{},{options:n||[]}))},be=function(){var e,n=null===(e=(0,s.TH)().pathname.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return Number(n)},ke=function(){return W(be())},Me=function(){var e=function(){var e=H(["name","typeId","processorId","tagId"]),n=(0,N.Z)(e,1)[0],t=be();return(0,f.useMemo)((function(){return{projectId:t,typeId:Number(n.typeId)||void 0,processorId:Number(n.processorId)||void 0,tagId:Number(n.tagId)||void 0,name:n.name}}),[n,t])}(),n=U(),t=(0,f.useState)({name:""}),r=(0,N.Z)(t,2),i=r[0],o=r[1],a=(0,C.Nr)(i);(0,f.useEffect)((function(){n(i)}),[a]);return(0,P.jsxs)(d.X2,{marginBottom:4,gap:!0,children:[(0,P.jsx)(ee.Z,{style:{width:"20rem"},placeholder:"\u4efb\u52a1\u540d",onChange:function(e){return o({name:e.target.value})}}),(0,P.jsx)(ae,{defaultOptionName:"\u7ecf\u529e\u4eba",value:null===e||void 0===e?void 0:e.processorId,onChange:function(e){return n({processorId:e})}}),(0,P.jsx)(Ie,{defaultOptionName:"\u7c7b\u578b",value:e.typeId,onChange:function(e){return n({typeId:e})}}),(0,P.jsx)(l.Z,{onClick:function(){n({name:void 0,processorId:void 0,tagId:void 0,typeId:void 0})},children:"\u6e05\u9664\u7b5b\u9009\u5668"})]})};function Pe(){(0,C.jr)("\u770b\u677f\u5217\u8868");var e=ke().data;return(0,P.jsx)(Le,{id:"\u770b\u677f\u9875\u9762",children:(0,P.jsxs)(d.X_,{children:[(0,P.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u770b\u677f"]}),(0,P.jsx)(Me,{})]})})}var we,Ee,Oe,Te,Ne=t(1739),De=t(7083),Fe=function(){return{projectId:be()}},ze=function(){return["epics",Fe()]},Se=function(e){var n=function(e){var n=(0,b.i)();return(0,k.useMutation)((function(e){return n("epics",{data:e,method:"POST"})}),R(e))}(ze()),t=n.mutate,r=n.isLoading,i=n.error,o=$.Z.useForm(),a=(0,N.Z)(o,1)[0],s=be(),c=function(){var n=(0,F.Z)(S().mark((function n(r){return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t((0,T.Z)((0,T.Z)({},r),{},{projectId:s}));case 2:e.onClose();case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,f.useEffect)((function(){a.resetFields()}),[a,e.visible]),(0,P.jsx)(Ne.Z,{visible:e.visible,onClose:e.onClose,forceRender:!0,destroyOnClose:!0,width:"100%",children:(0,P.jsx)(Ye,{children:r?(0,P.jsx)(De.Z,{size:"large"}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h1",{children:"\u521b\u5efa\u4efb\u52a1\u7ec4"}),(0,P.jsx)(d.Tv,{error:i}),(0,P.jsxs)($.Z,{form:a,layout:"vertical",style:{width:"30rem"},onFinish:c,children:[(0,P.jsx)($.Z.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d"}],children:(0,P.jsx)(ee.Z,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d\u79f0"})}),(0,P.jsx)($.Z.Item,{style:{textAlign:"right"},children:(0,P.jsx)(l.Z,{loading:r,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},Ye=a.ZP.div(we||(we=(0,o.Z)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Qe=function(){var e=ke().data,n=function(e){var n=(0,b.i)();return(0,k.useQuery)(["epics",e],(function(){return n("epics",{data:e})}))}(Fe()).data,t=function(e){var n=(0,b.i)();return(0,k.useQuery)(["tasks",e],(function(){return n("tasks",{data:e})}))}({projectId:null===e||void 0===e?void 0:e.id}).data,r=function(e){var n=(0,b.i)();return(0,k.useMutation)((function(e){var t=e.id;return n("epics/".concat(t),{method:"DELETE"})}),Q(e))}(ze()).mutate,i=(0,f.useState)(!1),o=(0,N.Z)(i,2),a=o[0],s=o[1];return(0,P.jsx)(P.Fragment,{children:(0,P.jsxs)(d.X_,{children:[(0,P.jsxs)(d.X2,{between:!0,children:[(0,P.jsxs)("h1",{children:[null===e||void 0===e?void 0:e.name,"\u4efb\u52a1\u7ec4"]}),(0,P.jsx)(l.Z,{onClick:function(){return s(!0)},type:"link",children:"\u521b\u5efa\u4efb\u52a1\u7ec4"})]}),(0,P.jsx)(g.ZP,{style:{},dataSource:n,itemLayout:"vertical",renderItem:function(n){return(0,P.jsxs)(g.ZP.Item,{children:[(0,P.jsx)(g.ZP.Item.Meta,{title:(0,P.jsxs)(d.X2,{between:!0,children:[(0,P.jsx)("span",{children:n.name}),(0,P.jsx)(l.Z,{onClick:function(){return function(e){ue.Z.confirm({title:"\u786e\u5b9a\u5220\u9664\u9879\u76ee\u7ec4\uff1a".concat(e.name),content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk:function(){r({id:e.id})}})}(n)},type:"link",children:"\u5220\u9664"})]}),description:(0,P.jsxs)("div",{children:[(0,P.jsxs)("div",{children:["\u5f00\u59cb\u65f6\u95f4\uff1a",de()(n.start).format("YYYY-MM-DD")]}),(0,P.jsxs)("div",{children:["\u7ed3\u675f\u65f6\u95f4\uff1a",de()(n.end).format("YYYY-MM-DD")]})]})}),(0,P.jsx)("div",{children:null===t||void 0===t?void 0:t.filter((function(e){return e.epicId===n.id})).map((function(n){return(0,P.jsx)(q.rU,{to:"/projects/".concat(null===e||void 0===e?void 0:e.id,"/kanban?editingTaskId=").concat(n.id),children:n.name},n.id)}))})]})}}),(0,P.jsx)(Se,{onClose:function(){return s(!1)},visible:a})]})})};function Re(){var e=function(){var e=(0,s.TH)().pathname.split("/");return["kanban","epic"].includes(e[e.length-1])?e[e.length-1]:"kanban"}();return(0,P.jsxs)(Ue,{children:[(0,P.jsx)(Ve,{children:(0,P.jsxs)(u.Z,{mode:"inline",selectedKeys:[e],children:[(0,P.jsx)(u.Z.Item,{children:(0,P.jsx)(q.rU,{to:"kanban",children:"\u770b\u677f"})},"kanban"),(0,P.jsx)(u.Z.Item,{children:(0,P.jsx)(q.rU,{to:"epic",children:"\u4efb\u52a1\u7ec4"})},"epic")]})}),(0,P.jsx)(Ge,{children:(0,P.jsxs)(s.Z5,{children:[(0,P.jsx)(s.AW,{path:"kanban",element:(0,P.jsx)(Pe,{})}),(0,P.jsx)(s.AW,{path:"epic",element:(0,P.jsx)(Qe,{})}),(0,P.jsx)(s.AW,{index:!0,element:(0,P.jsx)(Pe,{})})]})})]})}var Ae,We,Xe,Be,qe,He,Ue=a.ZP.div(Ee||(Ee=(0,o.Z)(["\n  display: grid;\n  grid-template-columns: 16rem 1fr;\n  width: 100%;\n"]))),Ve=a.ZP.aside(Oe||(Oe=(0,o.Z)(["\n  background-color: rgb(244, 245, 247);\n  display: flex;\n"]))),Ge=a.ZP.div(Te||(Te=(0,o.Z)(["\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\n  display: flex;\n  overflow: hidden;\n"]))),Ke=function(){var e=V(),n=e.projectModalOpen,t=e.close,r=e.editingProject,i=e.isLoading,o=(r?X:B)(K()),a=o.mutateAsync,s=o.error,c=o.isLoading,u=$.Z.useForm(),h=(0,N.Z)(u,1)[0],m=r?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee";return(0,f.useEffect)((function(){h.setFieldsValue(r)}),[r,h]),(0,P.jsx)(Ne.Z,{forceRender:!0,onClose:function(){h.resetFields(),t()},visible:n,width:"100%",children:(0,P.jsx)(_e,{children:i?(0,P.jsx)(De.Z,{size:"large"}):(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)("h1",{children:m}),(0,P.jsx)(d.Tv,{error:s}),(0,P.jsxs)($.Z,{form:h,layout:"vertical",style:{width:"40rem"},onFinish:function(e){a((0,T.Z)((0,T.Z)({},r),e)).then((function(){h.resetFields(),t()}))},children:[(0,P.jsx)($.Z.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}],children:(0,P.jsx)(ee.Z,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"})}),(0,P.jsx)($.Z.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"}],children:(0,P.jsx)(ee.Z,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"})}),(0,P.jsx)($.Z.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId",children:(0,P.jsx)(ae,{defaultOptionName:"\u8d1f\u8d23\u4eba"})}),(0,P.jsx)($.Z.Item,{style:{textAlign:"right"},children:(0,P.jsx)(l.Z,{loading:c,type:"primary",htmlType:"submit",children:"\u63d0\u4ea4"})})]})]})})})},_e=a.ZP.div(Ae||(Ae=(0,o.Z)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])));function Je(){return(0,P.jsxs)(nn,{children:[(0,P.jsx)($e,{}),(0,P.jsx)(an,{children:(0,P.jsxs)(s.Z5,{children:[(0,P.jsx)(s.AW,{path:"/projects",element:(0,P.jsx)(ge,{})}),(0,P.jsx)(s.AW,{path:"/projects/:projectId/*",element:(0,P.jsx)(Re,{})}),(0,P.jsx)(s.AW,{index:!0,element:(0,P.jsx)(ge,{})})]})}),(0,P.jsx)(Ke,{})]})}var $e=function(){return(0,P.jsxs)(tn,{between:!0,children:[(0,P.jsxs)(rn,{gap:!0,children:[(0,P.jsx)(d.zL,{type:"link",onClick:C.Xj,children:(0,P.jsx)(Z,{width:"18rem",color:"rgb(38, 132, 255)"})}),(0,P.jsx)(_,{}),(0,P.jsx)(w,{})]}),(0,P.jsx)(on,{children:(0,P.jsx)(en,{})})]})},en=function(){var e=(0,O.a)(),n=e.user,t=e.logout;return(0,P.jsx)(c.Z,{overlay:(0,P.jsx)(u.Z,{children:(0,P.jsx)(u.Z.Item,{children:(0,P.jsx)(l.Z,{onClick:t,type:"link",children:"\u767b\u51fa"})},"logout")}),children:(0,P.jsxs)(l.Z,{type:"link",onClick:function(e){return e.preventDefault()},children:["Hi,",null===n||void 0===n?void 0:n.name]})})},nn=a.ZP.div(We||(We=(0,o.Z)(["\n  display: grid;\n  grid-template-rows: 6rem 1fr; // 6rem;\n  /* grid-template-columns: 20rem 1fr 20rem;\n  grid-template-areas:\n    'header header header'\n    'nav main aside'\n    'footer footer footer'; */\n  height: 100vh;\n  /* grid-gap: 10rem; */\n"]))),tn=(0,a.ZP)(d.X2)(Xe||(Xe=(0,o.Z)(["\n  padding: 3.2rem;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n  z-index: 1;\n"]))),rn=(0,a.ZP)(d.X2)(Be||(Be=(0,o.Z)(["\n  /* display: flex;\n  align-items: center; */\n"]))),on=a.ZP.div(qe||(qe=(0,o.Z)([""]))),an=a.ZP.main(He||(He=(0,o.Z)(["\n  /* display: flex; */\n  overflow: hidden;\n  /* grid-area: main; */\n  /* height: calc(100vh - 6rem); */\n"])))}}]);
//# sourceMappingURL=213.abaf240c.chunk.js.map